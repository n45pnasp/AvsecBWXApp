/* =====================================================
   ChatBot â€” CSS Rapi & Responsif (Dark Theme)
   ===================================================== */

/* ---------- Variabel tema ---------- */
:root{
  /* Warna dasar */
  --bg:#0b1220;              /* latar app */
  --panel:#111827;           /* header & input bar */
  --card:#1f2937;            /* bubble bot */
  --user:#1e3a8a;            /* bubble user */
  --text:#e5e7eb;            /* teks utama */
  --muted:#9ca3af;           /* teks sekunder/hint */
  --border:rgba(255,255,255,.08);

  /* Aksen / tombol */
  --accent:#3b82f6;          /* biru */
  --accent-2:#2563eb;        /* biru lebih gelap */
  --accent-3:#60a5fa;        /* biru muda (hover chip) */

  /* Komponen */
  --chip-bg:#0f172a;
  --btn:#2563eb;
  --btn-hover:#1d4ed8;

  /* Radius & shadow */
  --radius:16px;
  --r-sm:10px;
  --shadow:0 10px 30px rgba(0,0,0,.35);

  /* Safe area (untuk device ber-notch) */
  --safe-t: env(safe-area-inset-top, 0px);
  --safe-b: env(safe-area-inset-bottom, 0px);
}

/* ---------- Reset ringan ---------- */
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
  color:var(--text);
  background:radial-gradient(1200px 800px at 20% -10%,#0e1a37 0%, var(--bg) 60%);
  background-attachment: fixed;
  -webkit-tap-highlight-color: transparent;
}

/* ---------- Header ---------- */
.chat-header{
  position: sticky; top:0; z-index:50;
  display:flex; align-items:center; gap:10px;
  height:56px; padding:0 16px;
  background:var(--panel);
  color:var(--text);
  border-bottom:1px solid var(--border);
  font-weight:700;
}

/* Tombol panah kembali (ke home.html) */
.back-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:40px; height:40px;
  color:var(--text); text-decoration:none;
  border-radius:10px;
  background:transparent; /* tetap gelap seperti header */
  margin-right:4px;
  transition: background .12s ease, box-shadow .12s ease, transform .08s ease, opacity .12s ease;
  -webkit-tap-highlight-color: transparent;
}
.back-btn:hover{ background:rgba(255,255,255,.06) }          /* highlight ringan saat diarahkan */
.back-btn:active{ background:rgba(0,0,0,.25); transform:translateY(1px) } /* tekan = gelap sedikit */
.back-btn:focus-visible{ outline:2px solid var(--accent-3); outline-offset:2px }
.back-btn svg{ width:24px; height:24px; stroke:currentColor }

/* ---------- Kontainer utama ---------- */
.chat-container{
  height:calc(100dvh - 56px);
  max-width: 880px;
  margin: 0 auto;
  display:flex; flex-direction:column;
}

/* ---------- Area pesan ---------- */
.chat-box{
  flex:1; overflow-y:auto; padding:18px 14px 8px;
  scroll-padding-bottom:90px;
}

/* Scrollbar (WebKit) */
.chat-box::-webkit-scrollbar{width:10px}
.chat-box::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.12);
  border-radius:999px;
  border:2px solid transparent;
}
.chat-box::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.22)}
.chat-box{scrollbar-color: rgba(255,255,255,.18) transparent; scrollbar-width: thin}

/* ---------- Gelembung pesan ---------- */
.chat-message{margin:10px 0; display:flex}
.chat-message .message{
  max-width: 90%;
  padding:10px 12px;
  border-radius: var(--r-sm);
  line-height:1.45;
  box-shadow: var(--shadow);
  word-wrap: break-word;
  white-space: pre-wrap; /* pertahankan \n untuk teks biasa */
}
.chat-message.user{justify-content:flex-end}
.chat-message.user .message{
  background:var(--user);
  color:#fff;
  border-top-right-radius:6px;
}
.chat-message.bot .message{
  background:var(--card);
  color:var(--text);
  border-top-left-radius:6px;
}

/* Separator kecil di dalam bubble */
.sep{
  height:1px; margin:10px 0;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent);
}

/* ---------- Tautan tombol (mis. "Buka SOP") ---------- */
.message .btn,
.btn{
  display:inline-block;
  background:var(--btn);
  color:#fff !important;
  padding:8px 12px;
  border-radius:10px;
  text-decoration:none;
  border:1px solid rgba(255,255,255,.1);
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
}
.message .btn:hover,.btn:hover{background:var(--btn-hover); transform: translateY(-1px)}
.message .btn:active,.btn:active{transform: translateY(0); opacity:.96}
.message .btn:focus-visible,.btn:focus-visible{
  outline:2px solid var(--accent-3); outline-offset:2px;
  box-shadow:0 0 0 4px rgba(59,130,246,.25);
}

/* ---------- Chips mode ---------- */
.chips{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:6px}
.chip{
  background:linear-gradient(180deg,var(--chip-bg),#0b162c);
  color:var(--text);
  border:1px solid var(--border);
  padding:8px 12px;
  border-radius:999px;
  cursor:pointer;
  transition: background .12s ease, border-color .12s ease, transform .12s ease;
}
.chip:hover{border-color:rgba(99,102,241,.35); transform: translateY(-1px)}
.chip:active{transform: translateY(0)}
.chip:focus-visible{outline:2px solid var(--accent-3); outline-offset:2px}
.hint{font-size:.9rem; color:var(--muted); margin-top:2px}

/* ---------- Input area ---------- */
.chat-input-area{
  position: sticky; bottom:0; z-index:40;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.35)) 0 0/100% 20px no-repeat,
              var(--panel);
  border-top:1px solid var(--border);
  padding:10px 12px calc(10px + var(--safe-b));
}
.input-wrapper{
  display:flex; align-items:center; gap:8px;
  background:#0d1428;
  border:1px solid var(--border);
  border-radius: calc(var(--radius) - 4px);
  padding:6px;
}
#userInput{
  flex:1; min-width:0;
  color:var(--text); background:transparent;
  border:none; outline:none;
  font-size:16px; line-height:1.4;
  padding:10px 12px;
}
#userInput::placeholder{color: #6b7280}

/* Tombol kirim */
.send-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:42px; height:42px;
  border:none; border-radius:12px;
  background:var(--accent);
  cursor:pointer;
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease, opacity .12s ease;
}
.send-btn[disabled]{opacity:.55; cursor:not-allowed}
.send-btn:hover:not([disabled]){background:var(--accent-2); transform: translateY(-1px)}
.send-btn:active:not([disabled]){transform: translateY(0)}
.send-btn:focus-visible{outline:2px solid var(--accent-3); outline-offset:2px}
.send-btn svg{width:22px; height:22px; fill:#fff}

/* ---------- Elemen teks inline di bubble ---------- */
.message strong{font-weight:700}
.message em{font-style:italic}
.message a{color:#cfe2ff; text-decoration: underline dotted}

/* ---------- Responsif ---------- */
@media (min-width: 640px){
  .chat-box{padding:22px 18px 10px}
  .input-wrapper{padding:8px}
  #userInput{font-size:17px}
  .chat-message .message{max-width: 78%}
}
@media (min-width: 980px){
  .chat-container{height:calc(100vh - 56px)}
}

/* ---------- Preferensi: reduce motion ---------- */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important; transition:none !important}
}

/* ---------- Utility kecil ---------- */
.hidden{display:none !important}
