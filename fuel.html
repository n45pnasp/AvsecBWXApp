<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Form BBM</title>
  <link rel="stylesheet" href="fuel.css" />
  <!-- Sembunyikan sampai status login dicek -->
  <style>html{visibility:hidden}</style>
</head>
<body>
  <!-- App Bar -->
  <div class="app-bar">
    <a class="back-btn" aria-label="Kembali" href="#" onclick="safeBackTo('index.html');return false;">
      <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M15 6L9 12L15 18"></path>
      </svg>
    </a>
    <h1 class="app-title">Form BBM</h1>
  </div>

  <main class="wrap">
    <!-- Card menu -->
    <section class="card" id="cardMenu">
      <div class="tab-buttons">
        <button id="tabInput" class="btn tab-btn active">Input Form</button>
        <button id="tabKupon" class="btn tab-btn">Ambil Kupon</button>
        <button id="tabFoto" class="btn tab-btn">Lapor Struk</button>
      </div>
    </section>

    <!-- Card 1: Input -->
    <section class="card" id="cardInput">

      <label>Unit Kerja
        <select id="unit"></select>
      </label>

      <label>Jenis BBM
        <select id="jenis"></select>
      </label>

      <label>Keperluan
        <select id="keperluan"></select>
      </label>

      <label>Jumlah (Liter)
        <input id="liter" type="number" min="0" step="0.1" inputmode="decimal" placeholder="0" />
      </label>

      <div class="row">
        <div class="info">Total Harga</div>
        <div class="price" id="harga">Rp 0</div>
      </div>

      <button id="btnKirim" class="btn primary full">Kirim</button>
      <div id="msg1" class="msg"></div>
    </section>

    <!-- Card 2: Cetak Kupon (muncul kalau ada yang VERIFIED=cetak) -->
    <section class="card hidden" id="cardCetak">

      <label>Pilih ID (Data)
        <select id="idList"></select>
      </label>
      <button id="btnPdf" class="btn primary full" disabled>Download PDF</button>
    </section>

    <!-- Card 3: Foto Struk (selalu tampil) -->
    <section class="card hidden" id="cardFoto">

      <div id="photoIdWrap"><!-- Select ID akan disisipkan di sini --></div>
      <button id="fotoBtn" class="btn full">Ambil Foto</button>
      <input id="file" type="file" accept="image/*" capture="environment" class="hidden" />
      <img id="preview" alt="" class="preview hidden" />
      <div id="msg3" class="msg"></div>
    </section>
  </main>

  <!-- Overlay Spinner -->
  <div id="overlay" class="overlay hidden" role="dialog" aria-live="polite" aria-modal="true">
    <div class="sheet" role="document">
      <div class="icon spinner"></div>
      <div class="texts">
        <div class="title" id="ovTitle">Memuatâ€¦</div>
        <div class="desc" id="ovDesc"></div>
      </div>
    </div>
  </div>

  <script type="module" src="fuel.js"></script>
  <script type="module" src="offline.js"></script>
  <script src="back.js"></script>
</body>
</html>

